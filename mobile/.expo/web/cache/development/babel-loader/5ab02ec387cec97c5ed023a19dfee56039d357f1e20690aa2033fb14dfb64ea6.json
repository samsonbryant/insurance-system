{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { showMessage } from 'react-native-flash-message';\nvar RealTimeService = function () {\n  function RealTimeService() {\n    _classCallCheck(this, RealTimeService);\n    this.socket = null;\n    this.isConnected = false;\n    this.listeners = new Map();\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n  }\n  return _createClass(RealTimeService, [{\n    key: \"connect\",\n    value: function connect(token) {\n      var _this = this;\n      if (this.socket && this.isConnected) {\n        return;\n      }\n      try {\n        this.socket = io('http://localhost:3000', {\n          auth: {\n            token: token\n          },\n          transports: ['websocket', 'polling'],\n          timeout: 20000\n        });\n        this.socket.on('connect', function () {\n          console.log('Real-time connection established');\n          _this.isConnected = true;\n          _this.reconnectAttempts = 0;\n          _this.emit('connectionStatus', {\n            connected: true\n          });\n        });\n        this.socket.on('disconnect', function (reason) {\n          console.log('Real-time connection lost:', reason);\n          _this.isConnected = false;\n          _this.emit('connectionStatus', {\n            connected: false\n          });\n          if (reason === 'io server disconnect') {\n            _this.handleReconnect();\n          }\n        });\n        this.socket.on('connect_error', function (error) {\n          console.error('Real-time connection error:', error);\n          _this.isConnected = false;\n          _this.emit('connectionStatus', {\n            connected: false,\n            error: error\n          });\n          _this.handleReconnect();\n        });\n        this.socket.on('verification_update', function (data) {\n          _this.handleVerificationUpdate(data);\n        });\n        this.socket.on('company_status_update', function (data) {\n          _this.handleCompanyStatusUpdate(data);\n        });\n        this.socket.on('system_alert', function (data) {\n          _this.handleSystemAlert(data);\n        });\n        this.socket.on('new_verification', function (data) {\n          _this.handleNewVerification(data);\n        });\n      } catch (error) {\n        console.error('Failed to establish real-time connection:', error);\n      }\n    }\n  }, {\n    key: \"handleReconnect\",\n    value: function handleReconnect() {\n      var _this2 = this;\n      if (this.reconnectAttempts < this.maxReconnectAttempts) {\n        this.reconnectAttempts++;\n        var delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 30000);\n        setTimeout(function () {\n          var _this2$socket;\n          console.log(`Attempting to reconnect (${_this2.reconnectAttempts}/${_this2.maxReconnectAttempts})`);\n          (_this2$socket = _this2.socket) == null ? void 0 : _this2$socket.connect();\n        }, delay);\n      }\n    }\n  }, {\n    key: \"handleVerificationUpdate\",\n    value: function handleVerificationUpdate(data) {\n      var verification = data.verification,\n        officer = data.officer;\n      showMessage({\n        message: `Verification ${verification.status.toUpperCase()}`,\n        description: `Policy ${verification.policy_number} by ${officer == null ? void 0 : officer.first_name} ${officer == null ? void 0 : officer.last_name}`,\n        type: verification.status === 'valid' ? 'success' : verification.status === 'fake' ? 'danger' : 'warning',\n        duration: 4000\n      });\n      this.emit('verificationUpdate', data);\n    }\n  }, {\n    key: \"handleCompanyStatusUpdate\",\n    value: function handleCompanyStatusUpdate(data) {\n      var company = data.company,\n        status = data.status;\n      showMessage({\n        message: `Company ${status}`,\n        description: `${company.name} status updated`,\n        type: status === 'approved' ? 'success' : 'info',\n        duration: 3000\n      });\n      this.emit('companyStatusUpdate', data);\n    }\n  }, {\n    key: \"handleSystemAlert\",\n    value: function handleSystemAlert(data) {\n      var type = data.type,\n        message = data.message,\n        severity = data.severity;\n      showMessage({\n        message: message,\n        type: severity === 'high' ? 'danger' : severity === 'medium' ? 'warning' : 'info',\n        duration: 5000\n      });\n      this.emit('systemAlert', data);\n    }\n  }, {\n    key: \"handleNewVerification\",\n    value: function handleNewVerification(data) {\n      var verification = data.verification,\n        officer = data.officer;\n      showMessage({\n        message: 'New Verification',\n        description: `Policy ${verification.policy_number} by ${officer == null ? void 0 : officer.first_name}`,\n        type: 'info',\n        duration: 3000\n      });\n      this.emit('newVerification', data);\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      if (!this.listeners.has(event)) {\n        this.listeners.set(event, []);\n      }\n      this.listeners.get(event).push(callback);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, callback) {\n      if (this.listeners.has(event)) {\n        var callbacks = this.listeners.get(event);\n        var index = callbacks.indexOf(callback);\n        if (index > -1) {\n          callbacks.splice(index, 1);\n        }\n      }\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event, data) {\n      if (this.listeners.has(event)) {\n        this.listeners.get(event).forEach(function (callback) {\n          try {\n            callback(data);\n          } catch (error) {\n            console.error(`Error in event listener for ${event}:`, error);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"joinRoom\",\n    value: function joinRoom(room) {\n      if (this.socket && this.isConnected) {\n        this.socket.emit('join-room', room);\n      }\n    }\n  }, {\n    key: \"leaveRoom\",\n    value: function leaveRoom(room) {\n      if (this.socket && this.isConnected) {\n        this.socket.emit('leave-room', room);\n      }\n    }\n  }, {\n    key: \"emitEvent\",\n    value: function emitEvent(event, data) {\n      if (this.socket && this.isConnected) {\n        this.socket.emit(event, data);\n      }\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n        this.isConnected = false;\n        this.listeners.clear();\n      }\n    }\n  }, {\n    key: \"getConnectionStatus\",\n    value: function getConnectionStatus() {\n      var _this$socket;\n      return {\n        connected: this.isConnected,\n        socketId: (_this$socket = this.socket) == null ? void 0 : _this$socket.id\n      };\n    }\n  }]);\n}();\nvar realTimeService = new RealTimeService();\nexport var useRealTime = function useRealTime(token) {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isConnected = _useState2[0],\n    setIsConnected = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    connectionError = _useState4[0],\n    setConnectionError = _useState4[1];\n  useEffect(function () {\n    if (token) {\n      realTimeService.connect(token);\n      var handleConnectionStatus = function handleConnectionStatus(status) {\n        setIsConnected(status.connected);\n        setConnectionError(status.error || null);\n      };\n      realTimeService.on('connectionStatus', handleConnectionStatus);\n      return function () {\n        realTimeService.off('connectionStatus', handleConnectionStatus);\n      };\n    }\n  }, [token]);\n  return {\n    isConnected: isConnected,\n    connectionError: connectionError,\n    realTimeService: realTimeService\n  };\n};\nexport var useRealTimeEvents = function useRealTimeEvents() {\n  var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var _useState5 = useState({}),\n    _useState6 = _slicedToArray(_useState5, 2),\n    eventData = _useState6[0],\n    setEventData = _useState6[1];\n  useEffect(function () {\n    var eventHandlers = {};\n    var eventEntries = Array.isArray(events) ? events.map(function (event) {\n      return [event, null];\n    }) : Object.entries(events);\n    eventEntries.forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        eventName = _ref2[0],\n        customHandler = _ref2[1];\n      var handler = customHandler || function (data) {\n        setEventData(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, eventName, data));\n        });\n      };\n      eventHandlers[eventName] = handler;\n      realTimeService.on(eventName, handler);\n    });\n    return function () {\n      eventEntries.forEach(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 1),\n          eventName = _ref4[0];\n        realTimeService.off(eventName, eventHandlers[eventName]);\n      });\n    };\n  }, [events]);\n  return eventData;\n};\nexport default realTimeService;","map":{"version":3,"names":["useEffect","useState","io","showMessage","RealTimeService","_classCallCheck","socket","isConnected","listeners","Map","reconnectAttempts","maxReconnectAttempts","_createClass","key","value","connect","token","_this","auth","transports","timeout","on","console","log","emit","connected","reason","handleReconnect","error","data","handleVerificationUpdate","handleCompanyStatusUpdate","handleSystemAlert","handleNewVerification","_this2","delay","Math","min","pow","setTimeout","_this2$socket","verification","officer","message","status","toUpperCase","description","policy_number","first_name","last_name","type","duration","company","name","severity","event","callback","has","set","get","push","off","callbacks","index","indexOf","splice","forEach","joinRoom","room","leaveRoom","emitEvent","disconnect","clear","getConnectionStatus","_this$socket","socketId","id","realTimeService","useRealTime","_useState","_useState2","_slicedToArray","setIsConnected","_useState3","_useState4","connectionError","setConnectionError","handleConnectionStatus","useRealTimeEvents","events","arguments","length","undefined","_useState5","_useState6","eventData","setEventData","eventHandlers","eventEntries","Array","isArray","map","Object","entries","_ref","_ref2","eventName","customHandler","handler","prev","_objectSpread","_defineProperty","_ref3","_ref4"],"sources":["/Users/user/Desktop/Insurrance_Verification_System/mobile/src/services/realTimeService.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { showMessage } from 'react-native-flash-message';\n\nclass RealTimeService {\n  constructor() {\n    this.socket = null;\n    this.isConnected = false;\n    this.listeners = new Map();\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n  }\n\n  connect(token) {\n    if (this.socket && this.isConnected) {\n      return;\n    }\n\n    try {\n      this.socket = io('http://localhost:3000', {\n        auth: { token },\n        transports: ['websocket', 'polling'],\n        timeout: 20000,\n      });\n\n      this.socket.on('connect', () => {\n        console.log('Real-time connection established');\n        this.isConnected = true;\n        this.reconnectAttempts = 0;\n        this.emit('connectionStatus', { connected: true });\n      });\n\n      this.socket.on('disconnect', (reason) => {\n        console.log('Real-time connection lost:', reason);\n        this.isConnected = false;\n        this.emit('connectionStatus', { connected: false });\n        \n        if (reason === 'io server disconnect') {\n          // Server disconnected, try to reconnect\n          this.handleReconnect();\n        }\n      });\n\n      this.socket.on('connect_error', (error) => {\n        console.error('Real-time connection error:', error);\n        this.isConnected = false;\n        this.emit('connectionStatus', { connected: false, error });\n        this.handleReconnect();\n      });\n\n      // Real-time notifications\n      this.socket.on('verification_update', (data) => {\n        this.handleVerificationUpdate(data);\n      });\n\n      this.socket.on('company_status_update', (data) => {\n        this.handleCompanyStatusUpdate(data);\n      });\n\n      this.socket.on('system_alert', (data) => {\n        this.handleSystemAlert(data);\n      });\n\n      this.socket.on('new_verification', (data) => {\n        this.handleNewVerification(data);\n      });\n\n    } catch (error) {\n      console.error('Failed to establish real-time connection:', error);\n    }\n  }\n\n  handleReconnect() {\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\n      this.reconnectAttempts++;\n      const delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 30000);\n      \n      setTimeout(() => {\n        console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\n        this.socket?.connect();\n      }, delay);\n    }\n  }\n\n  handleVerificationUpdate(data) {\n    const { verification, officer } = data;\n    \n    showMessage({\n      message: `Verification ${verification.status.toUpperCase()}`,\n      description: `Policy ${verification.policy_number} by ${officer?.first_name} ${officer?.last_name}`,\n      type: verification.status === 'valid' ? 'success' : \n            verification.status === 'fake' ? 'danger' : 'warning',\n      duration: 4000,\n    });\n\n    this.emit('verificationUpdate', data);\n  }\n\n  handleCompanyStatusUpdate(data) {\n    const { company, status } = data;\n    \n    showMessage({\n      message: `Company ${status}`,\n      description: `${company.name} status updated`,\n      type: status === 'approved' ? 'success' : 'info',\n      duration: 3000,\n    });\n\n    this.emit('companyStatusUpdate', data);\n  }\n\n  handleSystemAlert(data) {\n    const { type, message, severity } = data;\n    \n    showMessage({\n      message: message,\n      type: severity === 'high' ? 'danger' : \n            severity === 'medium' ? 'warning' : 'info',\n      duration: 5000,\n    });\n\n    this.emit('systemAlert', data);\n  }\n\n  handleNewVerification(data) {\n    const { verification, officer } = data;\n    \n    showMessage({\n      message: 'New Verification',\n      description: `Policy ${verification.policy_number} by ${officer?.first_name}`,\n      type: 'info',\n      duration: 3000,\n    });\n\n    this.emit('newVerification', data);\n  }\n\n  // Event system\n  on(event, callback) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, []);\n    }\n    this.listeners.get(event).push(callback);\n  }\n\n  off(event, callback) {\n    if (this.listeners.has(event)) {\n      const callbacks = this.listeners.get(event);\n      const index = callbacks.indexOf(callback);\n      if (index > -1) {\n        callbacks.splice(index, 1);\n      }\n    }\n  }\n\n  emit(event, data) {\n    if (this.listeners.has(event)) {\n      this.listeners.get(event).forEach(callback => {\n        try {\n          callback(data);\n        } catch (error) {\n          console.error(`Error in event listener for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  // Room management\n  joinRoom(room) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('join-room', room);\n    }\n  }\n\n  leaveRoom(room) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('leave-room', room);\n    }\n  }\n\n  // Manual emit for testing\n  emitEvent(event, data) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit(event, data);\n    }\n  }\n\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n      this.isConnected = false;\n      this.listeners.clear();\n    }\n  }\n\n  getConnectionStatus() {\n    return {\n      connected: this.isConnected,\n      socketId: this.socket?.id,\n    };\n  }\n}\n\n// Singleton instance\nconst realTimeService = new RealTimeService();\n\n// React hook for real-time functionality\nexport const useRealTime = (token) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [connectionError, setConnectionError] = useState(null);\n\n  useEffect(() => {\n    if (token) {\n      realTimeService.connect(token);\n      \n      const handleConnectionStatus = (status) => {\n        setIsConnected(status.connected);\n        setConnectionError(status.error || null);\n      };\n\n      realTimeService.on('connectionStatus', handleConnectionStatus);\n\n      return () => {\n        realTimeService.off('connectionStatus', handleConnectionStatus);\n      };\n    }\n  }, [token]);\n\n  return {\n    isConnected,\n    connectionError,\n    realTimeService,\n  };\n};\n\n// Hook for specific real-time events\nexport const useRealTimeEvents = (events = []) => {\n  const [eventData, setEventData] = useState({});\n\n  useEffect(() => {\n    const eventHandlers = {};\n\n    // Handle both array of event names and object with handlers\n    const eventEntries = Array.isArray(events) \n      ? events.map(event => [event, null])\n      : Object.entries(events);\n\n    eventEntries.forEach(([eventName, customHandler]) => {\n      const handler = customHandler || ((data) => {\n        setEventData(prev => ({\n          ...prev,\n          [eventName]: data,\n        }));\n      });\n\n      eventHandlers[eventName] = handler;\n      realTimeService.on(eventName, handler);\n    });\n\n    return () => {\n      eventEntries.forEach(([eventName]) => {\n        realTimeService.off(eventName, eventHandlers[eventName]);\n      });\n    };\n  }, [events]);\n\n  return eventData;\n};\n\nexport default realTimeService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}